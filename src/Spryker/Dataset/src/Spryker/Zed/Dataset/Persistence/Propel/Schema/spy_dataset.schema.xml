<?xml version="1.0"?>
<database xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          name="zed"
          xsi:noNamespaceSchemaLocation="http://static.spryker.com/schema-01.xsd"
          namespace="Orm\Zed\Dataset\Persistence"
          package="src.Orm.Zed.Dataset.Persistence">

    <table name="spy_dataset" phpName="SpyDataset">
        <column name="id_dataset"  required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="name" required="true" type="VARCHAR" default="NULL" size="255" />
        <column name="is_active" type="BOOLEAN" required="true" default="false"/>

        <unique name="spy_dataset_name-unique-key">
            <unique-column name="name"/>
        </unique>

        <behavior name="timestampable" />

        <id-method-parameter value="spy_dataset_pk_seq"/>
    </table>

    <table name="spy_dataset_col" phpName="SpyDatasetCol">
        <column name="id_dataset_col"  required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="title" required="true" type="VARCHAR" default="NULL" size="255"/>

        <unique name="spy_dataset_col_title-unique-key">
            <unique-column name="title"/>
        </unique>

        <id-method-parameter value="spy_dataset_col_pk_seq"/>
    </table>

    <table name="spy_dataset_row" phpName="SpyDatasetRow">
        <column name="id_dataset_row"  required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="title" required="true" type="VARCHAR" default="NULL" size="255"/>

        <unique name="spy_dataset_row_title-unique-key">
            <unique-column name="title"/>
        </unique>

        <id-method-parameter value="spy_dataset_row_pk_seq"/>
    </table>
    <table name="spy_dataset_row_col_value" phpName="SpyDatasetRowColValue">
        <column name="id_row_col_value"  required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="fk_dataset" required="true" type="INTEGER"/>
        <column name="fk_dataset_row" required="true" type="INTEGER"/>
        <column name="fk_dataset_col" required="true" type="INTEGER"/>
        <column name="value" required="false" type="VARCHAR" default="NULL" size="255"/>

        <foreign-key name="spy_dataset_row_col_value-fk_dataset" foreignTable="spy_dataset" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="fk_dataset" foreign="id_dataset"/>
        </foreign-key>
        <foreign-key name="spy_dataset_row_col_value-fk_dataset_row" foreignTable="spy_dataset_row" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="fk_dataset_row" foreign="id_dataset_row"/>
        </foreign-key>
        <foreign-key name="spy_dataset_row_col_value-fk_dataset_col" foreignTable="spy_dataset_col" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="fk_dataset_col" foreign="id_dataset_col"/>
        </foreign-key>

        <id-method-parameter value="spy_dataset_row_col_value_pk_seq"/>
    </table>

    <table name="spy_dataset_localized_attributes" idMethod="native" allowPkInsert="true"  phpName="SpyDatasetLocalizedAttributes">
        <column name="id_dataset_localized_attributes" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="fk_dataset" required="true" type="INTEGER"/>
        <column name="fk_locale" required="true" type="INTEGER"/>
        <column name="title" required="false" type="VARCHAR" default="NULL" size="255" />

        <foreign-key name="spy_dataset_localized_attributes-fk_dataset" foreignTable="spy_dataset" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="fk_dataset" foreign="id_dataset"/>
        </foreign-key>
        <foreign-key name="spy_dataset_localized_attributes-fk_locale" foreignTable="spy_locale" phpName="Locale">
            <reference local="fk_locale" foreign="id_locale"/>
        </foreign-key>

        <unique name="spy_dataset_localized_attributes-unique-fk_dataset">
            <unique-column name="fk_dataset"/>
            <unique-column name="fk_locale"/>
        </unique>

        <id-method-parameter value="spy_dataset_localized_attributes_pk_seq"/>
    </table>

</database>
