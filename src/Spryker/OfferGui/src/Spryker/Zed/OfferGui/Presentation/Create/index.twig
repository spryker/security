{% extends '@Gui/Layout/layout.twig' %}

{% set widget_title = 'Create Offer: ' | trans %}

{% block head_title widget_title %}
{% block section_title widget_title %}

{% block action %}
    {{ backActionButton('/offer-gui/view/list', 'Back list' | trans) }}
{% endblock %}

{% block content %}

    {% embed '@Gui/Partials/widget.twig' with { widget_title: 'Offer' | trans } %}
        {% block widget_content %}

            {{ form_start(form) }}

            {{ form_row(form.storeCurrency) }}
            {{ form_row(form.customerReference) }}

            {{ form_label(form.items) }}
            <table>
                {% for item in form.items %}
                    <tr>
                        <td>{{ form_row(item.sku) }}</td>
                        <td>
                            {{ form_row(item.unitGrossPrice) }}
                            {{ form_row(item.forcedUnitGrossPrice) }}
                        </td>
                        <td>{{ form_row(item.offerDiscount, { 'attr': {'placeholder': '0'}}) }}</td>
                        <td>{{ form_row(item.stock) }}</td>
                        <td>{{ form_row(item.offerFee, { 'attr': {'placeholder': '0'}}) }}</td>
                        <td>{{ form_row(item.quantity) }}</td>
                        <td>{{ form_row(item.unitSubtotalAggregation) }}</td>
                        <td>{{ form_row(item.sumSubtotalAggregation) }}</td>
                    </tr>
                {% endfor %}
            </table>

            {{ form_label(form.incomingItems) }}
            <table>
                {% for incomingItem in form.incomingItems %}
                    <tr>
                        <td>{{ form_row(incomingItem.sku) }}</td>
                        <td>{{ form_row(incomingItem.quantity) }}</td>
                    </tr>
                {% endfor %}
            </table>

            <table>
                <tr>
                    <td class="col-sm-4">{{ form_row(form.shippingAddress) }}</td>
                    <td class="col-sm-4">{{ form_row(form.billingAddress) }}</td>
                </tr>
            </table>

            {{ form_widget(form) }}

            <input type="submit" class="btn btn-primary safe-submit" name="submit-persist" value="{{ 'Create' | trans }}" />
            {{ form_end(form) }}

        {% endblock %}
    {% endembed %}

{% endblock %}

