{% set chartType = 'chart' %}
<script>/*<![CDATA[*/
    var chartData = [];

    {% for trace in data.traces %}
        {% set isPie = (trace.type == 'pie') %}
        {% set xLabels = isPie ? 'labels' : 'x' %}
        {% set yValues = isPie ? 'values' : 'y' %}
        {% set dataTrace = {
            name: (trace.name),
            type: (trace.type | default('bar')),
            (xLabels): (trace.labels),
            (yValues): (trace.values)
        } %}
        {% if trace.options is not empty %}
            {% for option in trace.options %}
                    {% set dataTrace = dataTrace|merge(option) %}
            {% endfor %}
        {% endif %}
        chartData.push({{ dataTrace | json_encode | raw }});
    {% endfor %}
    /*]]>*/</script>

{% include '@Chart/_partials/plotly-chart.twig' with {
    chartType: chartType,
    layout: layout,
    data: data
} %}
